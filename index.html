<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="images/favicon-32x32.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Interactive rating component main</title>
  <link rel="stylesheet" href="/styles/style.scss">
</head>

<body>
  <div id="not-submitted" class="container">
    <div class="icon-container">
      <img src="images/icon-star.svg" alt="">
    </div>
    <div>
      <h1>How did we do ?</h1>
      <p>Please let us know how we did with your support request. All feedback is appreciated to help us improve our
        offering!</p>
    </div>
    <div class="rating"></div>
    <a href="#" class="submit" onclick="submit()">submit</a>
  </div>
  <div id="submitted" class="container hidden">
    <img src="images/illustration-thank-you.svg" alt="">
    <h2 id="result"></h2>
    <div>
      <h1>Thank you!</h1>
      <p>We appreciate you taking the time to give a rating. If you ever need more support, don't hesitate to get in
        touch!</p>
    </div>
  </div>
</body>

</html>

<script>
  let ratings = 5
  let selectedRating = 0
  let ratingElements = document.getElementsByClassName('rating')[0]
  let notSubmitted = document.getElementById('not-submitted')
  let submitted = document.getElementById('submitted')

  // Methods

  const selectRating = (rating) => {
    selectedRating = rating

    for (let rating = 0; rating < ratings; rating++) {
      ratingElements.children[rating].classList = ''
    }

    ratingElements.children[rating - 1].classList = 'active'
  }

  const submit = () => {
    document.getElementById('result').innerText = `You selected ${selectedRating} out of ${ratings}`

    notSubmitted.classList.add('hidden')
    submitted.classList.remove('hidden')
  }

  // Main

  for (let rating = 0; rating < ratings; rating++) {
    let ratingInput = document.createElement('a')
    ratingInput.href = '#'

    let ratingElement = document.createElement('div')
    ratingElement.onclick = () => selectRating(rating + 1)

    ratingInput.appendChild(ratingElement)

    ratingElements.appendChild(ratingInput)
  }
</script>